import React, { useEffect, useState } from 'react';
import './CurrentWeather.css';

function CurrentWeather () {
    const [ weather, setWeather ] = useState(null);
    const [ loading, setLoading ] = useState(true);

    useEffect(() =>{
        fetch(`${process.env.REACT_APP_API}onecall?lat=-38.9516&lon=-68.0591&appid=${process.env.REACT_APP_API_KEY}&units=metric`)
        .then(res => res.json())
        .then(data => {
            setWeather(data);
            console.log(data);
            setLoading(false);
        })
    }, [])

    if(loading){
        return(
            <p>loading...</p>
        );
    }

const imageSelector = (weatherTitle) => {
    switch(weatherTitle){

        /* Electric storm with rain or drizzle */
        case 200:
        case 201:
        case 202:
        case 230:
        case 231:
        case 232:
            return <svg viewBox="0 0 239.5 202.5"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-2" d="M33,195.5A5.51,5.51,0,0,1,27.83,188l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L38.09,192A5.49,5.49,0,0,1,33,195.5Z"/><path className="cls-2" d="M54,195.5A5.51,5.51,0,0,1,48.83,188l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L59.09,192A5.49,5.49,0,0,1,54,195.5Z"/><path className="cls-2" d="M75,195.5A5.51,5.51,0,0,1,69.83,188l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L80.09,192A5.49,5.49,0,0,1,75,195.5Z"/><path className="cls-2" d="M158,195.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L163.09,192A5.49,5.49,0,0,1,158,195.5Z"/><path className="cls-2" d="M179,195.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L184.09,192A5.49,5.49,0,0,1,179,195.5Z"/><path className="cls-2" d="M200,195.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,0,1,10.26,3.94L205.09,192A5.49,5.49,0,0,1,200,195.5Z"/><path className="cls-1" d="M193.5,150h-27a5.5,5.5,0,0,1,0-11h27a35,35,0,0,0,0-70h-2a5.51,5.51,0,0,1-5.39-4.39C179.74,33.54,152.57,11,121.5,11,95.05,11,73,26.89,62.62,53.5l-.55,1.38a5.5,5.5,0,0,1-5.75,3.4A43,43,0,0,0,51.5,58a40.5,40.5,0,0,0,0,81H75a5.5,5.5,0,0,1,0,11H51.5a51.5,51.5,0,0,1,0-103c.63,0,1.25,0,1.88,0C65.87,17.54,91.16,0,121.5,0c34.8,0,65.4,24.16,74.37,58.06A46,46,0,0,1,193.5,150Z"/><polygon className="cls-3" points="136.5 162 123.17 162 132.5 127 104.5 168 117.15 168 107.5 202.5 136.5 162"/></g></g></svg>
        
        /* Electric storm only */    
        case 210:
        case 211:
        case 212:
        case 221:
            return <img src='../../assets/electricStorm.svg'/>;

        /* Drizzle */
        case 300:
        case 301:
        case 302:
        case 310:
        case 311:
        case 312:
        case 313:
        case 314:
        case 321:
            return <svg viewBox="0 0 312.5 242"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-3" d="M82.05,159a5.51,5.51,0,0,1-3.86-1.58A56.26,56.26,0,0,1,99.51,64.2a56.35,56.35,0,0,1,64.8,21.65A5.5,5.5,0,0,1,155.2,92a45.26,45.26,0,1,0-69.28,57.59A5.5,5.5,0,0,1,82.05,159Z"/><path className="cls-3" d="M121.94,46.43h-.26a5.5,5.5,0,0,1-5.24-5.75l1.61-35.43a5.5,5.5,0,0,1,11,.5l-1.6,35.43A5.51,5.51,0,0,1,121.94,46.43Z"/><path className="cls-3" d="M34,197.82a5.5,5.5,0,0,1-3.71-9.56l26.22-23.89a5.5,5.5,0,0,1,7.41,8.13L37.65,196.39A5.49,5.49,0,0,1,34,197.82Z"/><path className="cls-3" d="M174.83,72.06a5.5,5.5,0,0,1-3.7-9.57l26.22-23.88a5.5,5.5,0,1,1,7.4,8.13L178.54,70.62A5.52,5.52,0,0,1,174.83,72.06Z"/><path className="cls-3" d="M40.94,118.56h-.26L5.25,117a5.5,5.5,0,0,1,.5-11l35.43,1.61a5.5,5.5,0,0,1-.24,11Z"/><path className="cls-3" d="M66.49,65.72a5.48,5.48,0,0,1-4.06-1.79L38.51,37.74a5.5,5.5,0,0,1,8.13-7.42L70.55,56.51a5.5,5.5,0,0,1-.35,7.77A5.44,5.44,0,0,1,66.49,65.72Z"/><path className="cls-1" d="M266.5,224.5h-27a5.5,5.5,0,0,1,0-11h27a35,35,0,0,0,0-70h-2a5.5,5.5,0,0,1-5.39-4.4C252.74,108,225.56,85.5,194.5,85.5c-26.45,0-48.46,15.89-58.88,42.5l-.55,1.37a5.5,5.5,0,0,1-5.75,3.41,40.5,40.5,0,1,0-4.82,80.72H148a5.5,5.5,0,0,1,0,11H124.5a51.5,51.5,0,0,1,0-103l1.88,0c12.49-29.49,37.78-47,68.12-47,34.8,0,65.4,24.16,74.37,58.06a46,46,0,0,1-2.37,91.94Z"/><path className="cls-2" d="M168,242a5.5,5.5,0,0,1-5.13-7.48l7.53-19.6a5.5,5.5,0,1,1,10.27,4l-7.54,19.6A5.49,5.49,0,0,1,168,242Z"/><path className="cls-2" d="M189,242a5.5,5.5,0,0,1-5.13-7.48l7.53-19.6a5.5,5.5,0,1,1,10.27,4l-7.54,19.6A5.49,5.49,0,0,1,189,242Z"/><path className="cls-2" d="M210,242a5.5,5.5,0,0,1-5.13-7.48l7.53-19.6a5.5,5.5,0,1,1,10.27,4l-7.54,19.6A5.49,5.49,0,0,1,210,242Z"/></g></g></svg>;

        /* Rain */
        case 500:
        case 501:
        case 502:
        case 503:
        case 504:
        case 511:
        case 520:
        case 521:
        case 522:
        case 531:
            return <svg viewBox="0 0 239.5 205.5"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-1" d="M193.5,150h-27a5.5,5.5,0,0,1,0-11h27a35,35,0,0,0,0-70h-2a5.51,5.51,0,0,1-5.39-4.39C179.74,33.54,152.57,11,121.5,11,95.05,11,73,26.89,62.62,53.5l-.55,1.38a5.5,5.5,0,0,1-5.75,3.4A43,43,0,0,0,51.5,58a40.5,40.5,0,0,0,0,81H75a5.5,5.5,0,0,1,0,11H51.5a51.5,51.5,0,0,1,0-103c.63,0,1.25,0,1.88,0C65.87,17.54,91.16,0,121.5,0c34.8,0,65.4,24.16,74.37,58.06A46,46,0,0,1,193.5,150Z"/><path className="cls-2" d="M95,167.5A5.51,5.51,0,0,1,89.83,160l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L100.09,164A5.49,5.49,0,0,1,95,167.5Z"/><path className="cls-2" d="M116,167.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L121.09,164A5.49,5.49,0,0,1,116,167.5Z"/><path className="cls-2" d="M137,167.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L142.09,164A5.49,5.49,0,0,1,137,167.5Z"/><path className="cls-2" d="M87,205.5A5.51,5.51,0,0,1,81.83,198l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L92.09,202A5.49,5.49,0,0,1,87,205.5Z"/><path className="cls-2" d="M108,205.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L113.09,202A5.49,5.49,0,0,1,108,205.5Z"/><path className="cls-2" d="M129,205.5a5.51,5.51,0,0,1-5.13-7.47l7.54-19.6a5.5,5.5,0,1,1,10.26,3.94L134.09,202A5.49,5.49,0,0,1,129,205.5Z"/></g></g></svg>;

        /* Snow */
        case 600:
        case 601:
        case 602:
        case 611:
        case 612:
        case 613:
        case 615:
        case 616:
        case 620:
        case 621:
        case 622:
            return <svg viewBox="0 0 239.5 176.64"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-2" d="M89.5,154a3,3,0,0,1-2.15-.91,3,3,0,0,1,.06-4.24l9.28-9a3,3,0,1,1,4.18,4.3l-9.28,9A3,3,0,0,1,89.5,154Z"/><path className="cls-2" d="M115.36,154a3,3,0,0,1-2.09-5.15l9.28-9a3,3,0,1,1,4.18,4.3l-9.28,9A3,3,0,0,1,115.36,154Z"/><path className="cls-2" d="M141.22,154a3,3,0,0,1-2.09-5.15l9.28-9a3,3,0,0,1,4.18,4.3l-9.28,9A3,3,0,0,1,141.22,154Z"/><path className="cls-2" d="M98.64,154.14a3,3,0,0,1-2.15-.91l-9-9.28a3,3,0,0,1,4.31-4.18l9,9.28a3,3,0,0,1-2.16,5.09Z"/><path className="cls-2" d="M124.5,154.14a3,3,0,0,1-2.15-.91l-9-9.28a3,3,0,0,1,4.3-4.18l9,9.28a3,3,0,0,1-2.15,5.09Z"/><path className="cls-2" d="M150.36,154.14a3,3,0,0,1-2.16-.91l-9-9.28a3,3,0,0,1,4.31-4.18l9,9.28a3,3,0,0,1-2.15,5.09Z"/><path className="cls-2" d="M82,176.5a3,3,0,0,1-2.15-.91,3,3,0,0,1,.06-4.24l9.28-9a3,3,0,1,1,4.18,4.3l-9.28,9A3,3,0,0,1,82,176.5Z"/><path className="cls-2" d="M107.86,176.5a3,3,0,0,1-2.09-5.15l9.28-9a3,3,0,1,1,4.18,4.3l-9.28,9A3,3,0,0,1,107.86,176.5Z"/><path className="cls-2" d="M133.72,176.5a3,3,0,0,1-2.09-5.15l9.28-9a3,3,0,0,1,4.18,4.3l-9.28,9A3,3,0,0,1,133.72,176.5Z"/><path className="cls-2" d="M91.14,176.64a3,3,0,0,1-2.15-.91l-9-9.28a3,3,0,0,1,4.31-4.18l9,9.28a3,3,0,0,1-2.16,5.09Z"/><path className="cls-2" d="M117,176.64a3,3,0,0,1-2.15-.91l-9-9.28a3,3,0,0,1,4.3-4.18l9,9.28a3,3,0,0,1-2.15,5.09Z"/><path className="cls-2" d="M142.86,176.64a3,3,0,0,1-2.16-.91l-9-9.28a3,3,0,0,1,4.31-4.18l9,9.28a3,3,0,0,1-2.15,5.09Z"/><path className="cls-1" d="M193.5,150h-27a5.5,5.5,0,0,1,0-11h27a35,35,0,0,0,0-70h-2a5.51,5.51,0,0,1-5.39-4.4C179.74,33.54,152.57,11,121.5,11,95.05,11,73,26.89,62.62,53.5l-.55,1.38a5.49,5.49,0,0,1-5.75,3.4A43,43,0,0,0,51.5,58a40.5,40.5,0,0,0,0,81H75a5.5,5.5,0,0,1,0,11H51.5a51.5,51.5,0,0,1,0-103c.63,0,1.25,0,1.88,0C65.87,17.54,91.17,0,121.5,0c34.8,0,65.4,24.16,74.37,58.06A46,46,0,0,1,193.5,150Z"/></g></g></svg>;
    
        /* Mist, Smoke, Haze, Fog */
        case 701:
        case 711:
        case 721:
        case 741:
            return <svg viewBox="0 0 174.74 95.55"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-4" d="M43,27.65c-14.23,0-24.49-4.34-35.09-8.83L3.71,17.06A6,6,0,0,1,8.29,6l4.29,1.8C30.19,15.23,44.09,21.11,79,7.43c41.61-16.31,89.6-.78,91.62-.11a6,6,0,0,1-3.77,11.39c-.67-.22-46-14.78-83.47-.11C66.5,25.22,53.63,27.65,43,27.65Z"/><path className="cls-4" d="M43,61.6c-14.23,0-24.49-4.34-35.09-8.83C6.52,52.19,5.13,51.6,3.71,51A6,6,0,0,1,8.29,39.93c1.45.59,2.88,1.2,4.29,1.79C30.19,49.18,44.09,55.06,79,41.38c41.61-16.31,89.6-.78,91.62-.11a6,6,0,0,1-3.77,11.39c-.67-.22-46-14.77-83.47-.11C66.5,59.17,53.63,61.6,43,61.6Z"/><path className="cls-4" d="M43,95.55c-14.23,0-24.49-4.34-35.09-8.82C6.52,86.14,5.13,85.55,3.71,85A6,6,0,0,1,8.29,73.88l4.29,1.8C30.19,83.13,44.09,89,79,75.33c41.61-16.31,89.6-.78,91.62-.11a6,6,0,0,1-3.77,11.39c-.67-.22-46-14.77-83.47-.11C66.5,93.12,53.63,95.55,43,95.55Z"/></g></g></svg>;
        
        /* Dust, Sand, Ash, Squall */
        case 731:
        case 751:
        case 761:
        case 762:
        case 771:
            return <svg viewBox="0 0 233.3 150.5"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-4" d="M31,55.5a6,6,0,0,1,0-12l80.5-.5h2a16,16,0,0,0,16-16c0-8.55-6.88-15-16-15a6,6,0,0,1,0-12c15.7,0,28,11.86,28,27a28,28,0,0,1-28,28h-2L31,55.5Z"/><path className="cls-4" d="M136,150.5a6,6,0,0,1,0-12c9.12,0,16-6.45,16-15a16,16,0,0,0-16-16H43a6,6,0,0,1,0-12h93a28,28,0,0,1,28,28C164,138.64,151.7,150.5,136,150.5Z"/><path className="cls-4" d="M196.86,142a6,6,0,0,1,0-12c13.93,0,24.44-9.91,24.44-23.06A24.46,24.46,0,0,0,196.86,82.5H6a6,6,0,0,1,0-12H196.86a36.49,36.49,0,0,1,36.44,36.44C233.3,126.6,217.29,142,196.86,142Z"/></g></g></svg>;
        
        /* Tornado */
        case 781:
            return <svg viewBox="0 0 172.39 180"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-4" d="M88,180h-14a6,6,0,0,1,0-12H88a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M82.1,156H52.83a6,6,0,1,1,0-12H82.1a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M90.29,132h-48a6,6,0,1,1,0-12h48a6,6,0,1,1,0,12Z"/><path className="cls-4" d="M98.49,108.59H32.93a6,6,0,0,1,0-12H98.49a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M126.59,84H40a6,6,0,0,1,0-12h86.64a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M144.15,60H47a6,6,0,1,1,0-12h97.17a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M155.85,36H24.73a6,6,0,0,1,0-12H155.85a6,6,0,0,1,0,12Z"/><path className="cls-4" d="M166.39,12H6A6,6,0,0,1,6,0H166.39a6,6,0,0,1,0,12Z"/></g></g></svg>;

        /* Clear */
        case 800:
            return <svg viewBox="0 0 219 219"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-3" d="M109.75,165.75A56.25,56.25,0,1,1,166,109.5,56.32,56.32,0,0,1,109.75,165.75Zm0-101.5A45.25,45.25,0,1,0,155,109.5,45.3,45.3,0,0,0,109.75,64.25Z"/><path className="cls-3" d="M67.5,219a5.5,5.5,0,0,1-5.12-7.51l13-33a5.5,5.5,0,1,1,10.24,4l-13,33A5.51,5.51,0,0,1,67.5,219Z"/><path className="cls-3" d="M138.5,44a5.5,5.5,0,0,1-5.12-7.51l13-33a5.5,5.5,0,1,1,10.24,4l-13,33A5.51,5.51,0,0,1,138.5,44Z"/><path className="cls-3" d="M6.22,158.72A5.5,5.5,0,0,1,4,148.18l32.54-14.11a5.5,5.5,0,0,1,4.37,10.09L8.4,158.27A5.43,5.43,0,0,1,6.22,158.72Z"/><path className="cls-3" d="M180.25,85.39a5.5,5.5,0,0,1-2.19-10.55L210.6,60.73A5.5,5.5,0,1,1,215,70.83l-32.55,14.1A5.44,5.44,0,0,1,180.25,85.39Z"/><path className="cls-3" d="M38.5,86a5.47,5.47,0,0,1-2-.38l-33-13a5.5,5.5,0,1,1,4-10.24l33,13A5.5,5.5,0,0,1,38.5,86Z"/><path className="cls-3" d="M213.5,157a5.47,5.47,0,0,1-2-.38l-33-13a5.5,5.5,0,1,1,4-10.24l33,13a5.5,5.5,0,0,1-2,10.62Z"/><path className="cls-3" d="M79.81,44.29a5.49,5.49,0,0,1-5-3.31L60.62,8.46A5.5,5.5,0,1,1,70.7,4.07L84.85,36.6A5.5,5.5,0,0,1,82,43.83,5.35,5.35,0,0,1,79.81,44.29Z"/><path className="cls-3" d="M153.35,218.24a5.5,5.5,0,0,1-5-3.31L134.16,182.4A5.5,5.5,0,1,1,144.24,178l14.15,32.53a5.51,5.51,0,0,1-5,7.69Z"/></g></g></svg>;

        /* Partly Cloudy */
        case 801:
        case 802:
            return <svg viewBox="0 0 312.5 224.5"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-3" d="M82.05,159a5.51,5.51,0,0,1-3.86-1.58A56.26,56.26,0,0,1,99.51,64.2a56.36,56.36,0,0,1,64.8,21.65A5.5,5.5,0,0,1,155.2,92a45.26,45.26,0,1,0-69.28,57.59A5.5,5.5,0,0,1,82.05,159Z"/><path className="cls-3" d="M121.94,46.43h-.26a5.5,5.5,0,0,1-5.24-5.75l1.61-35.43a5.5,5.5,0,0,1,11,.5l-1.6,35.43A5.51,5.51,0,0,1,121.94,46.43Z"/><path className="cls-3" d="M34,197.82a5.5,5.5,0,0,1-3.71-9.56l26.22-23.89a5.5,5.5,0,0,1,7.41,8.13L37.65,196.39A5.49,5.49,0,0,1,34,197.82Z"/><path className="cls-3" d="M174.83,72.06a5.5,5.5,0,0,1-3.7-9.57l26.22-23.88a5.5,5.5,0,1,1,7.4,8.13L178.54,70.62A5.5,5.5,0,0,1,174.83,72.06Z"/><path className="cls-3" d="M40.94,118.56h-.26L5.25,117a5.5,5.5,0,0,1,.5-11l35.43,1.61a5.5,5.5,0,0,1-.24,11Z"/><path className="cls-3" d="M66.49,65.72a5.48,5.48,0,0,1-4.06-1.79L38.51,37.74a5.5,5.5,0,0,1,8.13-7.42L70.55,56.51a5.5,5.5,0,0,1-.35,7.77A5.44,5.44,0,0,1,66.49,65.72Z"/><path className="cls-1" d="M266.5,224.5h-142a51.5,51.5,0,0,1,0-103l1.88,0c12.48-29.49,37.78-47,68.12-47,34.8,0,65.4,24.16,74.37,58.06a46,46,0,0,1-2.37,91.94Zm-142-92a40.5,40.5,0,0,0,0,81h142a35,35,0,0,0,0-70h-2a5.5,5.5,0,0,1-5.39-4.4C252.74,108,225.56,85.5,194.5,85.5c-26.45,0-48.46,15.89-58.88,42.5l-.55,1.38a5.5,5.5,0,0,1-5.75,3.4A40.75,40.75,0,0,0,124.5,132.5Z"/></g></g></svg>;

        /* Cloudy */
        case 803:
        case 804:
            return <svg viewBox="0 0 239.5 150"><defs></defs><g id="Capa_2" data-name="Capa 2"><g id="Capa_1-2" data-name="Capa 1"><path className="cls-1" d="M193.5,150H51.5a51.5,51.5,0,0,1,0-103c.63,0,1.25,0,1.88,0C65.87,17.54,91.16,0,121.5,0c34.8,0,65.4,24.16,74.37,58.06A46,46,0,0,1,193.5,150ZM51.5,58a40.5,40.5,0,0,0,0,81h142a35,35,0,0,0,0-70h-2a5.51,5.51,0,0,1-5.39-4.39C179.74,33.54,152.57,11,121.5,11,95.05,11,73,26.89,62.62,53.5l-.55,1.38a5.49,5.49,0,0,1-5.75,3.4A43,43,0,0,0,51.5,58Z"/></g></g></svg>;        
    }
}

   return (
       <section className='CurrentWeather'>
           <div className='TempSect'>
                <div className='TempSect-TempToday'>
                    <h3 className='CurrentTemp'>{weather.current.temp}°C</h3>
                    <div className='MinMax'>
                        <h4 className='Max'>{weather.daily[0].temp.max}°</h4>
                        <h4 >|</h4>
                        <h4 className='Min'>{weather.daily[0].temp.min}°</h4>
                    </div>
                </div>
                <div className='TempIconSec'>
                    <div className='TempIcon'>
                        {imageSelector(weather.current.weather[0].id)}
                    </div>
                    <h2 className='WeatherTitle'>{weather.current.weather[0].main}</h2>
                </div>
           </div>

           <div className='ParamsSect'>
                <ul className='ParamsSect-List'>
                    <li className='Param'>
                        <h3 className='H3'>Humidity:</h3>
                        <p className='P'>{weather.current.humidity}%</p>
                    </li>
                    <li className='Param'>
                        <h3 className='H3'>Wind:</h3>
                        <p className='P'>{weather.current.wind_speed}km/h</p>
                    </li>
                    <li className='Param'>
                        <h3 className='H3'>Rain:</h3>
                        <p className='P'>{(weather.daily[0].pop)*100}%</p>
                    </li>
                </ul>
            </div>
       </section>
   )
}
export {CurrentWeather};